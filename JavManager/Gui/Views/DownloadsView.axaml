<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:vm="using:JavManager.Gui.ViewModels"
             x:Class="JavManager.Gui.Views.DownloadsView"
             x:DataType="vm:DownloadsViewModel">

    <Grid RowDefinitions="Auto,*,Auto" Margin="16">
        <!-- Header -->
        <Grid Grid.Row="0" ColumnDefinitions="Auto,*,Auto" Margin="0,0,0,12">
            <CheckBox Grid.Column="0" 
                      Content="{Binding Loc[Gui_Downloads_OptionDownloadingOnly]}" 
                      IsChecked="{Binding ShowDownloadingOnly}"/>
            <Button Grid.Column="2" 
                    Content="{Binding Loc[Gui_Downloads_ButtonRefresh]}" 
                    Command="{Binding RefreshCommand}"
                    IsEnabled="{Binding !IsLoading}"/>
        </Grid>

        <!-- Downloads List -->
        <Border Grid.Row="1" 
                BorderBrush="{DynamicResource SystemControlForegroundBaseMediumLowBrush}" 
                BorderThickness="1" 
                CornerRadius="4">
            <ListBox ItemsSource="{Binding Downloads}" SelectionMode="Single">
                <ListBox.ItemTemplate>
                    <DataTemplate>
                        <Grid ColumnDefinitions="*,80,70,70,80,60" Margin="4">
                            <TextBlock Grid.Column="0" Text="{Binding Name}" TextTrimming="CharacterEllipsis"/>
                            <TextBlock Grid.Column="1" Text="{Binding State}" 
                                       Foreground="{DynamicResource SystemControlForegroundBaseMediumBrush}"/>
                            <TextBlock Grid.Column="2" Text="{Binding ProgressText}" TextAlignment="Right"/>
                            <TextBlock Grid.Column="3" Text="{Binding Size}" TextAlignment="Right"
                                       Foreground="{DynamicResource SystemControlForegroundBaseMediumBrush}"/>
                            <TextBlock Grid.Column="4" Text="{Binding DownloadSpeed}" TextAlignment="Right"
                                       Foreground="Green"/>
                            <TextBlock Grid.Column="5" Text="{Binding Eta}" TextAlignment="Right"
                                       Foreground="{DynamicResource SystemControlForegroundBaseMediumBrush}"/>
                        </Grid>
                    </DataTemplate>
                </ListBox.ItemTemplate>
            </ListBox>
        </Border>

        <!-- Status Bar -->
        <Grid Grid.Row="2" ColumnDefinitions="*,Auto" Margin="0,12,0,0">
            <TextBlock Grid.Column="0"
                       Text="{Binding StatusMessage}"
                       TextWrapping="NoWrap"
                       TextTrimming="CharacterEllipsis"
                       ToolTip.Tip="{Binding StatusMessage}"
                       VerticalAlignment="Center"
                       Foreground="{DynamicResource SystemControlForegroundBaseMediumBrush}"/>
            <ProgressBar Grid.Column="1"
                         IsVisible="{Binding IsLoading}"
                         IsIndeterminate="True"
                         HorizontalAlignment="Right"
                         Width="100"/>
        </Grid>
    </Grid>
</UserControl>
